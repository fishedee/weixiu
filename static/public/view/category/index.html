<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">
	<title>用户管理</title>
	<link rel="stylesheet" type="text/css" href="../../assets/css/bootstrap.css" />
	<link rel="stylesheet" type="text/css" href="../../assets/css/bootstrap-responsive.css" />
	<link rel="stylesheet" type="text/css" href="../../assets/css/style.css" />
	<link rel="Stylesheet" type="text/css" href="../../assets/css/module.css" />
	<link rel="Stylesheet" type="text/css" href="../../assets/css/form.css" />
	<link rel="stylesheet" type="text/css" href="../../assets/css/jquery.datetimepicker.css" />
	<link rel="stylesheet" type="text/css" href="../../assets/css/colorbox.css" />
	
	<script type="text/javascript" src="../../assets/js/jquery.js"></script>
	<script type="text/javascript" src="../../assets/js/jquery.datetimepicker.js"></script>
	<script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
	
	<script type="text/javascript" src="../../assets/js/common.js"></script>
	<script type="text/javascript" src="../../assets/js/jquery.colorbox.js"></script>

	<script type="text/javascript" src="../../assets/js/gri/gri.js"></script>
	<script type="text/javascript" src="../../assets/js/gri/gri.datatable.js"></script>
</head>

<body class="definewidth m10">
<!-- 查询窗口 -->
<form id="user-form" class="form-inline">
    名称：
    <input type="text" name="name" class="input-small"/>
	备注：
    <input type="text" name="remark" class="input-small"/>
	状态：
    <select name="state">
		<option value="">请选择状态</option>
		<option value="0">可用</option>
		<option value="1">不可用</option>
    </select>
    <button type="button" class="btn query">查询</button>
    <button type="reset" class="btn">重置</button>
</form>
<div class="m10">
    <button class="btn add">添加类目</button>
    <div id="table"></div>
</div>
<div>
</div>

<script>
function view(categoryId){
	_href('/category/view.html?categoryId=' + categoryId);
}
function add(){
	_href('/category/view.html');
}
function get(params){
	var fields = {
		categoryId:"类目ID",
        name: '名称',
        remark: '备注',
		state: {
			name:'状态',
			format:function(data){
				var m = {0:"可用",1:"不可用"};
				return m[data];
			}
		},
        createTime: '创建时间',
        modifyTime: '修改时间',
        oper:{
			name:'操作',
			format:function(data){
				return "<a href='#' class='_edit'>编辑</a>"
			}
		}
    };
    _table('/category/search', {params:params,key_index: 'categoryId', data: 'data', fields: fields}, function(){
        $("._edit").click(function(){
            var categoryId = $.trim($(this).parent().parent().find(".categoryId").text());
            view(categoryId);
        });
    });
}
$(function(){
	$(".query").click(function(){
		 get({
			name:$("input[name=name]").val(),
			remark:$("input[name=remark]").val(),
			state:$("select[name=state]").val()
	   });
	});

    $(".add").click(function(){
       add();
    });
	
	get({});
});

</script>
</body>
</html>
